A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\MPEI.IVTI.VMSS.0720-15.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE MPEI.IVTI.VMSS.0720-15.asm SET(SMALL) DEBUG PRINT(.\Listings\MPEI.IVTI.
                      VMSS.0720-15.lst) OBJECT(.\Objects\MPEI.IVTI.VMSS.0720-15.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;==========================================================================================
                             ============================;
                       2     ; –ö–æ–¥ –∫ –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–±–æ—Ç–µ –ø–æ –ú–ü–° 
                       3     ; –ü—Ä–æ–≥—Ä–∞–º–º–∞: "CP_MPS_A-07-20_SAFONOV_AA"
                       4     ; –ê–≤—Ç–æ—Ä: –°–∞—Ñ–æ–Ω–æ–≤ –ê.–ê., —Å—Ç—É–¥–µ–Ω—Ç –≥—Ä. –ê-07-20                         
                                                                                             ;
                       5     ;==========================================================================================
                             ============================;
                       6     
                       7     ;------------------------------------------------------------------------------------------
                             ----------------------------;
                       8     ;                                                      –ö–û–ù–°–¢–ê–ù–¢–´                  
                                                                  ;
                       9     ;------------------------------------------------------------------------------------------
                             ----------------------------;
                      10     
  0007                11     G                       EQU 7           ; –Ω–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã
  000F                12     M                       EQU 15          ; –Ω–æ–º–µ—Ä –≤ –∂—É—Ä–Ω–∞–ª–µ
                      13     
                      14     ; –°–ò–ì–ù–ê–õ–´
  00B4                15     Y1                      EQU P3.4
  00B5                16     Y3                      EQU P3.5
  00B1                17     UART_TX         EQU P3.1 
  0093                18     LED                     EQU P1.3
  00B6                19     WR_MEM          EQU P3.6
  00B7                20     RD_MEM          EQU     P3.7
                      21             
  0094                22     FULL_BUF        EQU     P1.4
  0095                23     SBL0            EQU P1.5
  0096                24     SBL1            EQU P1.6
  0097                25     SBL2            EQU P1.7
                      26             
                      27     ; –ê–î–†–ï–°–ù–´–ï –°–ò–ì–ù–ê–õ–´
  0D00                28     RG1                     EQU 0D00h
  0E00                29     RG2                     EQU 0E00h
  0B00                30     KBRD            EQU 0B00h
  0070                31     CE_MEM          EQU 70h
                      32     
                      33     ;–í–†–ï–ú–ï–ù–ù–´–ï –ò–ù–¢–ï–†–í–ê–õ–´
  8AD0                34     TimerT0STROB    EQU 8AD0h       ; –î–õ–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –°–¢–†–û–ë–ê Y1 ---> 2*M = 2*15 
                             = 30 [–ú–°] = 30000 [–ú–ö–°] => 65536 - 30000 = 35536 = 8AD0h
  92A0                35     TimerT1                 EQU     92A0h   ; –î–õ–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –°–ü–ê–î–ê –ü–ï–†–ò–û–î–
                             ò–ß–ï–°–ö–û–ì–û –°–ò–ì–ù–ê–õ–ê Y3 ---> –¢-t–∏ = (20+–ú)-G = 20+15-7 = 28 [–ú–°] = 28000 [–ú–ö–°] =>
                      36                                                             ; 65536 - 28000 = 37536 = 92A0h
  E4A8                37     TimerT1ti               EQU 0E4A8h      ; –î–õ–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ò–ú–ü–£–õ–¨–°–ê –ü–ï–†–
                             ò–û–î–ò–ß–ï–°–ö–û–ì–û –°–ò–ì–ù–ê–õ–ê Y3 ---> t–∏ = G = 7 [–ú–°] => 65536 - 7000 = 58536      
                      38                     
                      39     ; –ù–ê–ó–ù–ê–ß–ï–ù–ò–Ø –†–ï–ì–ò–°–¢–†–û–í:
                      40     ;       R0 - –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø "–°–ò–¢–£–ê–¢–ò–í–ù–û"
                      41     ;       R1 - –§–õ–ê–ì –û–®–ò–ë–ö–ò –û–ü–ï–†–ê–¢–û–†–ê
                      42     ;       R2 - –¶–ò–§–†–ê –í –ó–ù–ê–ö–û–ú–ï–°–¢–ï –ú–õ–ê–î–®–ï–ì–û –†–ê–ó–†–Ø–î–ê –°–î–ò
                      43     ;       R3 - –¶–ò–§–†–ê –í –ó–ù–ê–ö–û–ú–ï–°–¢–ï –°–¢–ê–†–®–ï–ì–û –†–ê–ó–†–Ø–î–ê –°–î–ò
                      44     ;       R4 - –î–ê–ù–ù–´–ï –û–¢ UART
                      45     ;       R5 - –í–´–ß–ò–°–õ–ï–ù–ù–û–ï –£–ü–†–ê–í–õ–Ø–Æ–©–ï–ï –í–û–ó–î–ï–ô–°–¢–í–ò–ï Y2
                      46     ;       R6 - "–•–í–û–°–¢" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–ú–õ.  –ß–ê–°–¢–¨)
                      47     ;       R7 - "–•–í–û–°–¢" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–°–¢. –ß–ê–°–¢–¨)
                      48     
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     2

0000                  49     ORG 0000h
0000 2100             50             JMP START
                      51     
                      52     
0003                  53     ORG 0003h               ; –ê–î–†–ï–° –û–ë–†–ê–ë–û–¢–ß–ò–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–Ø –û–¢ –ö–õ–
                             ê–í–ò–ê–¢–£–†–´ (–ü–û –í–ù–ï–®–ù–ï–ú–£ –í–•–û–î–£ INT0)
0003 2105             54             JMP     EXT0_KBRD
                      55     
000B                  56     ORG 000Bh               ; –ê–î–†–ï–° –û–ë–†–ê–ë–û–¢–ß–ò–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–Ø –û–¢ –¢–ê–
                             ô–ú–ï–†–ê –¢0
000B 21C5             57             JMP             GEN_Y1
                      58     
0013                  59     ORG 0013h               ; –ê–î–†–ï–° –û–ë–†–ê–ë–û–¢–ß–ò–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–Ø –û–¢ –ö–û–
                             õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–ü–û –í–ù–ï–®–ù–ï–ú–£ –í–•–û–î–£ INT1)
0013 21D2             60             JMP     EXT1_BUSY
                      61     
001B                  62     ORG 001Bh               ; –ê–î–†–ï–° –û–ë–†–ê–ë–û–¢–ß–ò–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–Ø –û–¢ –¢–ê–
                             ô–ú–ï–†–ê –¢1
001B 4112             63             JMP             GEN_Y3
                      64     
0023                  65     ORG 0023H               ; –ê–î–†–ï–° –û–ë–†–ê–ë–û–¢–ß–ò–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–Ø –û–¢ –ü–û–
                             °–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–ì–û –ü–û–†–¢–ê (UART)
0023 4132             66             JMP     SERIAL
                      67     
                      68     
----                  69     DSEG AT 0030h
0030                  70                     Q:                              ds      0               ; –ò–ù–ò–¶–ò–ê–õ–ò–
                             ó–ò–†–£–ï–ú –ö–ê–ö "–°–õ–û–í–û" (2 –ë–ê–ô–¢–ê), –û–î–ù–ê–ö–û –†–ï–ê–õ–¨–ù–û –ò–°–ü–û–õ–¨–ó–
                             û–í–ê–¢–¨–°–Ø –ë–£–î–ï–¢ –¢–û–õ–¨–ö–û 1-–ô –¨–ê–ô–¢
0030                  71              HEAD_MEM:                              ds      0               ; "–ì–û–õ–û–í–ê" –ö
                             –û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–ú–õ. –ò –°–¢. –ß–ê–°–¢–ò –°–û–û–¢–í–ï–í–°–¢–í–ï–ù–ù–û)
                      72     
----                  73     CSEG AT 0100h
0100                  74     START:  
0100 513C             75             CALL INI
0102 00               76             NOP
                      77             
0103 80FE             78             JMP $           
                      79     
                      80     ;==========================================================================================
                             ============================;
                      81     ;||                                           –ë–õ–û–ö –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –ü–†–ï–†–´–
                             í–ê–ù–ò–ô                                           ||;
                      82     ;||                                                                                        
                                                                                                                        
                                                                                ||;
                      83     
                      84     ; -------------------------------------- 1. –û–ë–†–ê–ë–û–¢–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–ô –û–¢ –ö
                             –õ–ê–í–ò–ê–¢–£–†–´ ----------------------------------------;
                      85     
0105                  86     EXT0_KBRD:
0105 00               87             NOP                                     ; –≠–õ–ï–ú–ï–ù–¢ –ü–†–û–ì–†–ê–ú–ú–ù–û–ô "–ó
                             –ê–©–ò–¢–´"
0106 00               88             NOP                                             ; –û–¢ –î–†–ï–ë–ï–ó–ì–ê –ö–û–ù–¢–ê–
                             ö–¢–û–í
0107 00               89             NOP             
                      90             
0108 C2A8             91             CLR     EX0                             ; –ó–ê–ü–†–ï–¢ –ü–†–ï–†–´–í–ê–ù–ò–ô –û–¢ –¢
                             –ê–°–¢–ê–¢–£–†–´
                      92     
010A C295             93             CLR             SBL0                            ; –§–û–†–ú–ò–†–û–í–ê–ù–ò–ï "–ë–ï–ì–
                             £–©–ï–ì–û –ù–£–õ–Ø" –ù–ê –õ–ò–ù–ò–Ø–• –û–ü–†–û–°–ê –¢–ê–°–¢–ê–¢–£–†–´
                      94     
010C 900B00           95                     MOV             DPTR, #KBRD                     ; –ß–¢–ï–ù–ò–ï –°–û–°–¢–û–Ø
                             –ù–ò–Ø –õ–ò–ù–ò–ò –¢–ê–°–¢–ê–¢–£–†–´
010F E0               96                     MOVX    A, @DPTR                        
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     3

0110 550F             97                     ANL             A, 00001111b    ; –ù–ê–õ–û–ñ–ï–ù–ò–ï –ú–ê–°–ö–ò –î–õ–Ø –ü–û
                             –õ–£–ß–ï–ù–ò–Ø –ë–ò–¢–û–í, –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–´–• –¢–û–õ–¨–ö–û –ó–ê –¢–ê–°–¢–ê–¢–£–†–£
                      98             
                      99                     ; –ë–õ–û–ö –ü–†–û–í–ï–†–ö–ò –ë–ò–¢–ê –û–®–ò–ë–ö–ò - –ï–°–õ–ò –í–ó–í–ï–î–Å–ù
                              (–î–û –≠–¢–û–ì–û –ë–´–õ–ê –°–û–í–ï–†–®–ï–ù–ê –û–®–ò–ë–ö–ê), –¢–û –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò
                             –¢–¨ –¢–û–õ–¨–ö–û –ù–ê–ñ–ê–¢–ò–ï "R"
0112 BB0111          100                     CJNE    R3, #1, GO_NEXT
0115 B4010C          101                     CJNE    A, #00000001b,  GO_TO_KBRD_END  ; –ï–°–õ–ò –ù–ê–ñ–ê–¢–ê –ù–ï –ö–õ–ê
                             –í–ò–®–ê "R" - –ò–ì–ù–û–†–ò–†–£–ï–ú –í–°–Å –û–°–¢–ê–õ–¨–ù–û–ï
                     102                     
0118 7900            103                             MOV             R1, #0                                  ; –ò–ù–ê–ß–
                             ï - –°–ù–ò–ú–ê–ï–ú –ë–ò–¢ –û–®–ò–ë–ö–ò
011A 74FF            104                             MOV             A, #-1                                  ; –ò –û–ß–ò
                             –©–ê–ï–ú –°–î–ò      
011C 711C            105                             CALL    INDICATION
011E 74FF            106                             MOV             A, #-1                                  
0120 711C            107                             CALL    INDICATION                      
0122 21C2            108                             JMP             KBRD_END
                     109                             
0124                 110                             GO_TO_KBRD_END: 
0124 21C2            111                                     JMP     KBRD_END
                     112                             
0126                 113             GO_NEXT:
0126 B40206          114                     CJNE    A, #00000010b, CHECK6           ; –î–ê–õ–ï–ï –ò–î–Å–¢ "–ú–ê–°–ö–ò–†
                             –û–í–ê–ù–ò–ï" –ù–ê–ñ–ê–¢–û–ô –ö–õ–ê–í–ò–®–ò
0129 7409            115                             MOV             A, #9                                   ; –ï–Å –¢–†
                             –ê–ù–°–õ–ò–†–û–í–ê–ù–ò–ï –í –ù–ï–ö–û–¢–û–†–û–ï –ß–ò–°–õ–û
012B 711C            116                             CALL    INDICATION                              ; –ò –í–´–ó–û–í –ü–
                             †–û–¶–ï–î–£–†–´ –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø
012D 21C2            117                             JMP             KBRD_END
                     118                             
012F                 119                     CHECK6:
012F B40406          120                     CJNE    A, #00000100b, CHECK3
0132 7406            121                             MOV             A, #6
0134 711C            122                             CALL    INDICATION
0136 21C2            123                             JMP             KBRD_END
                     124                             
0138                 125                     CHECK3:
0138 B40806          126                     CJNE    A, #00001000b, LINE2
013B 7403            127                             MOV             A, #3
013D 711C            128                             CALL    INDICATION
013F 21C2            129                             JMP             KBRD_END
                     130             
0141                 131             LINE2:
0141 D295            132             SETB    SBL0
0143 C296            133             CLR             SBL1                            ; –§–û–†–ú–ò–†–û–í–ê–ù–ò–ï "–ë–ï–ì–
                             £–©–ï–ì–û –ù–£–õ–Ø" –ù–ê –õ–ò–ù–ò–Ø–• –û–ü–†–û–°–ê –¢–ê–°–¢–ê–¢–£–†–´
                     134     
0145 900B00          135                     MOV             DPTR, #KBRD                     ; –ß–¢–ï–ù–ò–ï –°–û–°–¢–û–Ø
                             –ù–ò–Ø –õ–ò–ù–ò–ò –¢–ê–°–¢–ê–¢–£–†–´
0148 E0              136                     MOVX    A, @DPTR
0149 550F            137                     ANL             A, 00001111b    ; –ù–ê–õ–û–ñ–ï–ù–ò–ï –ú–ê–°–ö–ò –î–õ–Ø –ü–û
                             –õ–£–ß–ï–ù–ò–Ø –ë–ò–¢–û–í, –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–´–• –¢–û–õ–¨–ö–û –ó–ê –¢–ê–°–¢–ê–¢–£–†–£
                     138             
014B B40106          139                     CJNE    A, #00000001b, CHECK8           ; –î–ê–õ–ï–ï –ò–î–Å–¢ "–ú–ê–°–ö–ò–†
                             –û–í–ê–ù–ò–ï" –ù–ê–ñ–ê–¢–û–ô –ö–õ–ê–í–ò–®–ò
014E 7400            140                             MOV             A, #0                                   ; –ï–Å –¢–†
                             –ê–ù–°–õ–ò–†–û–í–ê–ù–ò–ï –í –ù–ï–ö–û–¢–û–†–û–ï –ß–ò–°–õ–û
0150 711C            141                             CALL    INDICATION                              ; –ò –í–´–ó–û–í –ü–
                             †–û–¶–ï–î–£–†–´ –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø
0152 806E            142                             JMP             KBRD_END
                     143                             
0154                 144                     CHECK8:
0154 B40206          145                     CJNE    A, #00000010b, CHECK5                           
0157 7408            146                             MOV             A, #8                                   
0159 711C            147                             CALL    INDICATION              
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     4

015B 8065            148                             JMP             KBRD_END
                     149     
015D                 150                     CHECK5:
015D B40406          151                     CJNE    A, #00000100b, CHECK2
0160 7405            152                             MOV             A, #5
0162 711C            153                             CALL    INDICATION
0164 805C            154                             JMP             KBRD_END
                     155                             
0166                 156                     CHECK2:
0166 B40806          157                     CJNE    A, #00001000b, LINE3
0169 7402            158                             MOV             A, #2
016B 711C            159                             CALL    INDICATION
016D 8053            160                             JMP             KBRD_END
                     161     
016F                 162             LINE3:
016F D296            163             SETB    SBL1
0171 C297            164             CLR             SBL2                            ; –§–û–†–ú–ò–†–û–í–ê–ù–ò–ï "–ë–ï–ì–
                             £–©–ï–ì–û –ù–£–õ–Ø" –ù–ê –õ–ò–ù–ò–Ø–• –û–ü–†–û–°–ê –¢–ê–°–¢–ê–¢–£–†–´
                     165             
0173 900B00          166                     MOV             DPTR, #KBRD                     ; –ß–¢–ï–ù–ò–ï –°–û–°–¢–û–Ø
                             –ù–ò–Ø –õ–ò–ù–ò–ò –¢–ê–°–¢–ê–¢–£–†–´
0176 E0              167                     MOVX    A, @DPTR
                     168                     
0177 B40225          169                     CJNE    A, #00000010b, CHECK7                           ; –¢–£–¢ –ü–†–û–í–ï
                             –†–Ø–ï–ú –ù–ê–ñ–ê–¢–ò–ï –ö–õ–ê–í–ò–®–ò "–ï"
                     170                             
                     171                     ; –ë–õ–û–ö –ü–†–û–í–ï–†–ö–ò –ö–û–†–†–ï–ö–¢–ù–û–°–¢–ò –í–í–û–î–ê
017A BAFF02          172                             CJNE    R2, #-1,        FIX_Q           ; –ü–†–û–í–ï–†–ö–ê –ù–ê–õ–ò
                             –ß–ò–Ø "–•–û–¢–¨ –ß–ï–ì–û-–¢–û" –í –ú–õ–ê–î–®–ï–ú –†–ê–ó–†–Ø–î–ï –°–î–ò
017D 803B            173                                     JMP             CODE_ERROR
                     174                                     
                     175                     ; –§–ò–ö–°–ò–†–û–í–ê–ù–ò–ï Q
017F                 176                             FIX_Q:
017F BBFF02          177                             CJNE    R3, #-1, GO_SUMM                ; –ï–°–õ–ò –°–¢–ê–†–®–ò–ô –
                             †–ê–ó–†–Ø–î –ù–ï –ë–´–õ –ó–ê–ü–ò–°–ê–ù, –¢–û –ï–ì–û –ù–ê–î–û "–ò–ù–ò–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–¢–¨" –ù–£–õ–ï–ú
0182 7B00            178                                     MOV             R3, #0
0184                 179                             GO_SUMM:
0184 EB              180                                     MOV             A, R3                           ; | –í–´–ß–
                             ò–°–õ–ï–ù–ò–ï –ó–ù–ê–ß–ï–ù–ò–Ø Q
0185 75F00A          181                                     MOV             B, #10                          ; |     
0188 A4              182                                     MUL     AB                                      ; |
0189 2A              183                                     ADD             A, R2                           ; | R3*10+R
                             2 = Q
                     184                                      
018A 7830            185                                     MOV             R0, #Q                          ; –ù–ê–°–¢–
                             †–û–ô–ö–ê –ö–û–°–í–ï–ù–ù–û–ô –ê–î–†–ï–°–ê–¶–ò–ò
018C F6              186                                     MOV             @R0, A                          ; –ù–ï–ü–û–
                             °–†–ï–î–°–¢–í–ï–ù–ù–û, –§–ò–ö–°–ò–†–û–í–ê–ù–ò–ï Q
018D 51EB            187                                     CALL    DATACHECK                       ; –í–´–ó–û–í –ü–†–û
                             –¶–ï–î–£–†–´ –ü–†–ò–ù–Ø–¢–ò–Ø –†–ï–®–ï–ù–ò–Ø –û–ë –£–ü–†–ê–í–õ–ï–ù–ò–ò
018F 8031            188                                     JMP             KBRD_END
                     189                             
0191 C2B4            190                             CLR     Y1                                              ; –°–ò–ì–ù–
                             ê–õ Y1 –ì–ï–ù–ï–†–ò–†–£–ï–¢–°–Ø –ï–°–õ–ò –î–ï–ô–°–¢–í–ò–¢–ï–õ–¨–ù–û –ë–´–õ –ü–†–û–ò–ó–í–ï–î
                             –ï–ù –í–í–û–î –î–ê–ù–ù–´–• –° –¢–ê–°–¢–ê–¢–£–†–´
0193 D28C            191                             SETB    TR0                                             ; –ó–ê–ü–£–
                             °–ö –¢–ê–ô–ú–ï–†–ê –¢0 –î–õ–Ø –ö–û–ù–¢–†–û–õ–Ø –î–õ–ò–¢–ï–õ–¨–ù–û–°–¢–ò –°–¢–†–û–ë–ê Y1
0195 74FF            192                             MOV             A, #-1                                  ; "–û–ß–ò–°
                             –¢–ö–ê" –°–î–ò               
0197 711C            193                             CALL    INDICATION
0199 74FF            194                             MOV             A, #-1                                  
019B 711C            195                             CALL    INDICATION                      
019D 8023            196                             JMP             KBRD_END
                     197                     
019F                 198                     CHECK7:         
019F B40206          199                     CJNE    A, #00000010b, CHECK4                   ; –î–ê–õ–ï–ï –ò–î–Å–¢ "–ú–ê
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     5

                             –°–ö–ò–†–û–í–ê–ù–ò–ï" –ù–ê–ñ–ê–¢–û–ô –ö–õ–ê–í–ò–®–ò
01A2 7407            200                             MOV             A, #7                                   ; –ï–Å –¢–†
                             –ê–ù–°–õ–ò–†–û–í–ê–ù–ò–ï –í –ù–ï–ö–û–¢–û–†–û–ï –ß–ò–°–õ–û
01A4 711C            201                             CALL    INDICATION                              ; –ò –í–´–ó–û–í –ü–
                             †–û–¶–ï–î–£–†–´ –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø
01A6 801A            202                             JMP             KBRD_END
                     203                     
01A8                 204                     CHECK4:
01A8 B40406          205                     CJNE    A, #00000100b, CHECK1
01AB 7404            206                             MOV             A, #4
01AD 711C            207                             CALL    INDICATION
01AF 8011            208                             JMP             KBRD_END
                     209                     
01B1                 210                     CHECK1:
01B1 B4080E          211                     CJNE    A, #00001000b, KBRD_END
01B4 7401            212                             MOV             A, #1
01B6 711C            213                             CALL    INDICATION
01B8 8008            214                             JMP             KBRD_END
                     215             
01BA                 216             CODE_ERROR:
01BA 719E            217                     CALL    ERROR                                   ; –í–´–ó–û–í –ü–†–û–¶–ï–î–£
                             –†–´ –û–ë–†–ê–ë–û–¢–ö–ò –û–®–ò–ë–ö–ò (–í–´–í–û–î –ö–û–î–ê –ù–ê –°–î–ò)
01BC 8004            218                     JMP             KBRD_END                                ; "–ë–õ–û–ö–ò–†–û–í
                             –ö–ê" –í–í–û–î–ê –î–ê–ù–ù–´–•
                     219             
01BE 711C            220             CALL    INDICATION                              ; –í–´–ó–û–í –ü–†–û–¶–ï–î–£–†–´ –û–
                             ¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –í–í–ï–î–Å–ù–ù–´–• –î–ê–ù–ù–´–• –ù–ê –°–î–ò
01C0 51EB            221             CALL    DATACHECK                               ; –í–´–ó–û–í –ü–†–û–¶–ï–î–£–†–´ –ü–
                             †–ò–ù–Ø–¢–ò–Ø –†–ï–®–ï–ù–ò–Ø –û–ë –£–ü–†–ê–í–õ–ï–ù–ò–ò               
                     222     
01C2                 223             KBRD_END:
01C2 D2A8            224                     SETB    EX0                     ; –†–ê–ó–†–ï–®–ï–ù–ò–ï –ü–†–ï–†–´–í–ê–ù–ò–ô
                              –û–¢ –¢–ê–°–¢–ê–¢–£–†–´
01C4 32              225     RETI
                     226     
                     227     ; -------------------------------------- 2. –û–ë–†–ê–ë–û–¢–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–ô –û–¢ –¢
                             –ê–ô–ú–ï–†–ê –¢0 ----------------------------------------;
01C5                 228     GEN_Y1:
01C5 D2B4            229             SETB    Y1                                              ; –û–ö–û–ù–ß–ê–ù–ò–ï –°–¢–†
                             –û–ë–ê –ù–ò–ó–ö–û–ì–û –£–†–û–í–ù–Ø –°–ò–ì–ù–ê–õ–ê Y1
01C7 C28D            230             CLR             TF0                                             ; –°–ù–Ø–¢–ò–ï –§–õ
                             –ê–ì–ê –ü–ï–†–ï–ü–û–õ–ù–ï–ù–ò–Ø –°–ß–Å–¢–ß–ò–ö–ê –¢0
                     231             
                     232             ; –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –í–†–ï–ú–ï–ù–ù–û–ì–û –ò–ù–¢–ï–†–í–ê–õ–ê –î–õ–Ø –¢–ê–
                             ô–ú–ï–†–ê –¢0
01C9 C28C            233             CLR             TR0                                             ; –û–°–¢–ê–ù–û–í–ö–
                             ê –¢–ê–ô–ú–ï–†–ê
01CB 758C75          234             MOV     TH0, #HIGH(-TimerT0STROB)       ; –ó–ê–ì–†–£–ó–ö–ê –°–¢. –ë–ê–ô–¢–ê –ò–ù–¢–
                             ï–†–í–ê–õ–ê –í–†–ï–ú–ï–ù–ò                                   
01CE 758A30          235             MOV     TL0, #LOW(-TimerT0STROB)        ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ë–ê–ô–¢–ê –ò–ù–¢–
                             ï–†–í–ê–õ–ê –í–†–ï–ú–ï–ù–ò
01D1 32              236     RETI
                     237     
                     238     ; ---------------------------------- 3. –û–ë–†–ê–ë–û–¢–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–ô –û–¢ –ö–û–õ
                             –¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê -------------------------------------;
01D2                 239     EXT1_BUSY:
01D2 C0E0            240             PUSH    ACC
                     241             
01D4 C294            242             CLR             FULL_BUF                ; –°–ù–ò–ú–ê–ï–ú –°–ò–ì–ù–ê–õ –ü–ï–†–ï–ü–û–
                             õ–ù–ï–ù–ò–ò–Ø –ë–£–§–ï–†–ê
01D6 EE              243             MOV             A, R6                   ; (–ú–õ. –ß–ê–°–¢–¨ –£–ö–ê–ó–ê–¢–ï–õ–Ø "–•–
                             í–û–°–¢–ê")
01D7 2402            244             ADD             A, #2                   ; –ü–ï–†–ï–°–¢–ê–ù–û–í–ö–ê –£–ö–ê–ó–ê–¢–ï–õ
                             –Ø "–•–í–û–°–¢–ê" –ù–ê 1 –ó–ê–ü–ò–°–¨ –í–ü–ï–†–ï–î (2 –ë–ê–ô–¢–ê)
01D9 F5F0            245             MOV             B, A
01DB EF              246             MOV             A, R7                   ; (–°–¢. –ß–ê–°–¢–¨ –£–ö–ê–ó–ê–¢–ï–õ–Ø "–•–
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     6

                             í–û–°–¢–ê")
01DC 3400            247             ADDC    A, #0                   ; –£–ß–ï–¢ –í–û–ó–ú–û–ñ–ù–û–ì–û –ü–†–ï–ù–û–°–ê
01DE FF              248             MOV             R7, A
01DF AEF0            249             MOV             R6, B
                     250     
                     251     ; –°–†–ê–í–ù–ï–ù–ò–ï –° –ê–î–†–ï–°–û–ú –ó–ê–ü–ò–°–ò, –°–õ–ï–î–£–Æ–©–ï–ô –ó–ê –ü–û–°–õ–ï–î–ù
                             –ï–ô (1792-–ô) –ó–ê–ü–ò–°–¨–Æ (–ê–î–†–ï–°: 1792*2 -1 = 3583 + 2 = 3585 = 0E01h)
                     252                                                                                                
                                  
01E1 BF0E07          253                     CJNE    R7, #0Eh, END_CHECK_TAIL                ; –ï–°–õ–ò –°–¢–ê–†–®–ê–Ø –
                             ß–ê–°–¢–¨ "–•–í–û–°–¢–ê" –ï–©–Å "–ù–ï –î–û–†–û–°–õ–ê" - –í–´–•–û–î–ò–ú
01E4 BE0104          254                     CJNE    R6, #01h, END_CHECK_TAIL                ; –ï–°–õ–ò –ú–õ–ê–î–®–ê–Ø –
                             ß–ê–°–¢–¨ "–•–í–û–°–¢–ê" –ï–©–Å "–ù–ï –î–û–†–û–°–õ–ê" - –í–´–•–û–î–ò–ú
                     255                     
                     256             ; "–•–í–û–°–¢" –í–´–®–ï–õ –ó–ê –ì–†–ê–ù–ò–¶–£ –ó–ê–ü–ò–°–ï–ô - –ü–ï–†–ï–°–¢–ê–í–ò–¢
                             –¨ –ï–ì–û –ù–ê 1-–Æ –ó–ê–ü–ò–°–¨
01E7 7E04            257             MOV             R6, #04h                
01E9 7F00            258             MOV             R7, #00h
                     259             
01EB                 260             END_CHECK_TAIL:
                     261             ; –¢–£–¢ –ü–†–û–í–ï–†–ö–ê –ù–ï –î–û–®–ï–õ –õ–ò "–•–í–û–°–¢" –ö "–ì–û–õ–û–í–ï"
01EB 7830            262                     MOV             R0,     #HEAD_MEM       ; "–ù–ê–°–¢–†–û–ô–ö–ê" –ù–ê –ê–î–†–
                             ï–° –ó–ù–ê–ß–ï–ù–ò–Ø –ì–û–õ–û–í–´
                     263             
01ED 08              264                     INC             R0
01EE E6              265                     MOV             A, @R0                  ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ë–ê–ô–¢–ê
                              –ó–ù–ê–ß–ï–ù–ò–Ø –ì–û–õ–û–í–´
                     266             
01EF 8EF0            267                     MOV             B, R6
01F1 B5F009          268                     CJNE    A, B, INCORRECT         ; –ï–°–õ–ò –ë–£–§–ï–† –ù–ï "–ü–£–°–¢" - –ò–
                             î–Å–ú –î–ê–õ–¨–®–ï
                     269             
01F4 18              270                     DEC             R0
01F5 E6              271                     MOV             A, @R0                  ; –ó–ê–ì–†–£–ó–ö–ê –°–¢–ê–†–®–ï–ì–û
                              –ë–ê–ô–¢–ê –ó–ù–ê–ß–ï–ù–ò–Ø –ì–û–õ–û–í–´
                     272             
01F6 8FF0            273                     MOV             B, R7
01F8 B5F002          274                     CJNE    A, B, INCORRECT         ; –ï–°–õ–ò –ë–£–§–ï–† –ù–ï "–ü–£–°–¢" - –ò–
                             î–Å–ú –î–ê–õ–¨–®–ï 
01FB 8002            275                     JMP             OK
                     276             
01FD                 277             INCORRECT:
01FD D294            278                     SETB    FULL_BUF                        ; –°–û–û–ë–©–ê–ï–ú –í–ù–ï–®–ù–ï–ú–£
                              –£–°–¢–†–û–ô–°–¢–í–£, –ß–¢–û –ë–£–§–ï–† –ü–£–°–¢
                     279             
01FF                 280             OK:
                     281             ; –ó–ê–ü–ò–°–´–í–ê–ï–ú –¢–ï–£–©–ò–ô –£–ö–ê–ó–ê–¢–ï–õ–¨ "–•–í–û–°–¢–ê" –í "–ù–ê–ß–ê–
                             õ–û" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê
01FF 7470            282                     MOV             A, #CE_MEM              ; "–í–´–ë–û–†" –ú–ò–ö–†–û–°–•–ï–ú–´
                              –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê [CS]
0201 54F0            283                     ANL             A, #11110000b   ; –û–ë–ù–£–õ–ï–ù–ò–ï –°–¢–ê–†–®–ò–• –ë–ò–¢–
                             û–í –ê–î–†–ï–°–ê
0203 F583            284                     MOV             DPH, A
0205 4402            285                     ORL             A, #02h                 ; "–ù–ê–°–¢–†–û–ô–ö–ê" –ù–ê –ê–î–†–
                             ï–° –•–†–ê–ù–ï–ù–ò–Ø –£–ö–ê–ó–ê–¢–ï–õ–ï–ô (00h..01h - "–ì–û–õ–û–í–ê" / 02h..03h - "–•–í–û–°–¢")
0207 758202          286                     MOV             DPL, #02h
                     287                     
020A EF              288                     MOV             A, R7           ; –ó–ê–ì–†–£–ó–ö–ê –°–¢. –ß–ê–°–¢–ò –£–ö–ê–
                             ó–ê–¢–ï–õ–Ø –ù–ê "–•–í–û–°–¢"
020B F0              289                     MOVX    @DPTR, A                ; –í "–ù–ê–ß–ê–õ–û" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë
                             –£–§–ï–†–ê
                     290     
020C A3              291                     INC             DPTR
                     292                     
020D EE              293                     MOV             A, R6           ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ß–ê–°–¢–ò –£–ö–ê–
                             ó–ê–¢–ï–õ–Ø –ù–ê "–•–í–û–°–¢"
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     7

020E F0              294                     MOVX    @DPTR, A                ; –í "–ù–ê–ß–ê–õ–û" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë
                             –£–§–ï–†–ê
                     295     
020F D0E0            296             POP             ACC
                     297             
0211 32              298     RETI
                     299     
                     300     ; -------------------------------------- 4. –û–ë–†–ê–ë–û–¢–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–ô –û–¢ –¢
                             –ê–ô–ú–ï–†–ê –¢1 ----------------------------------------;
0212                 301     GEN_Y3:
0212 C28F            302             CLR             TF1                                             ; –°–ù–Ø–¢–ò–ï –§–õ
                             –ê–ì–ê –ü–ï–†–ï–ü–û–õ–ù–ï–ù–ò–Ø –°–ß–Å–¢–ß–ò–ö–ê –¢1
0214 BD000E          303             CJNE    R5, #0, GO_TO_HI                ; –ï–°–õ–ò –í R5 –ù–ê–•–û–î–ò–¢–°–Ø "0" - –
                             ó–ù–ê–ß–ò–¢ –ù–ï–û–ë–•–û–î–ò–ú–û –ê–ö–¢–ò–í–ò–ó–ò–†–û–í–ê–¢–¨ –°–ò–ì–ù–ê–õ –ù–ê t–∏
                     304                                                     
                     305                     ; –ò–ù–ê–ß–ï –°–ë–†–ê–°–´–í–ê–ï–ú –°–ò–ì–ù–ê–õ –ù–ê –¢-t–∏
0217 C2B5            306                     CLR             Y3 
0219 758D92          307                     MOV             TH1, #HIGH(TimerT1)                     ; –ó–ê–ì–†–£–ó–ö–ê 
                             –°–¢. –ë–ê–ô–¢–ê –í–†–ï–ú–ï–ù–ò –°–ü–ê–î–ê (–í –¢–ï–ù–ï–í–û–ô –†–ï–ì–ò–°–¢–†)
021C 758BA0          308                     MOV             TL1, #LOW(TimerT1)              ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ë
                             –ê–ô–¢–ê –í–†–ï–ú–ï–ù–ò –°–ü–ê–î–ê
021F D28E            309                     SETB    TR1                                                             ; –
                             í–ö–õ–Æ–ß–ï–ù–ò–ï –¢1
0221 7D01            310                     MOV             R5, #1                                                  ; –
                             ò–ó–ú–ï–ù–ï–ù–ò–ï –ó–ù–ê–ß–ï–ù–ò–Ø –í –†–ï–ì–ò–°–¢–†–ï –ù–ê –ü–†–û–¢–ò–í–û–ü–û–õ–û–ñ–ù–û–ï
0223 800C            311                     JMP             GEN_Y3_END
                     312                     
0225                 313              GO_TO_HI:
0225 D2B5            314                     SETB    Y3
0227 758DE4          315                     MOV             TH1, #HIGH(TimerT1ti)           ; –ó–ê–ì–†–£–ó–ö–ê –°–¢. –ë
                             –ê–ô–¢–ê –í–†–ï–ú–ï–ù–ò –ò–ú–ü–£–õ–¨–°–ê (–í –¢–ï–ù–ï–í–û–ô –†–ï–ì–ò–°–¢–†)
022A 758BA8          316                     MOV             TL1, #LOW(TimerT1ti)            ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ë
                             –ê–ô–¢–ê –í–†–ï–ú–ï–ù–ò –ò–ú–ü–£–õ–¨–°–ê
022D D28E            317                     SETB    TR1                                                             ; –
                             í–ö–õ–Æ–ß–ï–ù–ò–ï –¢1
022F 7D00            318                     MOV             R5, #0                                                  ; –
                             ò–ó–ú–ï–ù–ï–ù–ò–ï –ó–ù–ê–ß–ï–ù–ò–Ø –í –†–ï–ì–ò–°–¢–†–ï –ù–ê –ü–†–û–¢–ò–í–û–ü–û–õ–û–ñ–ù–û–ï
                     319                     
0231                 320             GEN_Y3_END:
0231 32              321     RETI
                     322     
                     323     ; -------------------------------- 5. –û–ë–†–ê–ë–û–¢–ö–ê –ü–†–ï–†–´–í–ê–ù–ò–ô –û–¢ –ü–û–°–õ
                             –ï–î–û–í–ê–¢–ï–õ–¨–ù–û–ì–û –ü–û–†–¢–ê ---------------------------------;
0232                 324     SERIAL:
0232 E599            325             MOV     A, SBUF         ; –ó–ê–ë–ò–†–ê–ï–ú –ü–†–ò–®–ï–î–®–ò–ï –î–ê–ù–ù–´–ï –ò–ó –ë–
                             £–§–ï–†–ê (8 –ë–ò–¢) 
0234 FC              326             MOV             R4, A           ; –°–û–•–†–ê–ù–ï–ù–ò–ï –ü–†–ò–®–ï–î–ù–ï–ì–û –ü–ê–ö–
                             ï–¢–ê
                     327             
0235 51EB            328             CALL    DATACHECK       ; –í–´–ó–û–í –ü–†–û–¶–ï–î–£–†–´ –ü–†–ò–ù–Ø–¢–ò–Ø –†–ï–®–ï–ù
                             –ò–Ø –û–ë –£–ü–†–ê–í–õ–ï–ù–ò–ò
0237 51AA            329             CALL    WRITEMEM        ; –ó–ê–ü–ò–°–¨ –ü–û–õ–£–ß–ï–ù–ù–û–ì–û –ü–ê–ö–ï–¢–ê –í –ö–û–
                             õ–¨–¶–ï–í–û–ô –ë–£–§–ï–†
                     330             
0239 C298            331             CLR     RI                      ; –°–ù–Ø–¢–ò–ï –§–õ–ê–ì–ê –ó–ê–ü–û–õ–ù–ï–ù–ò–Ø –ë–£
                             –§–ï–†–ê UART
023B 32              332     RETI
                     333     ;||                                                                                        
                                                                                                                        
                                                                                ||;
                     334     ;||                                                                                        
                                                                                                                        
                                                                                ||;
                     335     ;==========================================================================================
                             ============================;
                     336     
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     8

                     337     
                     338     ;==========================================================================================
                             ============================;
                     339     ;||                                                       –ë–õ–û–ö –ü–†–û–¶–ï–î–£–†        
                                                                               ||;
                     340     ;||                                                                                        
                                                                                                                        
                                                                                ||;
                     341     
                     342     ; ------------------------------------------------ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ú–ü–° ------
                             --------------------------------------------;
023C                 343     INI:    
023C C2AF            344             CLR             EA                              ; –ó–ê–ü–†–ï–¢ –ê–ü–ü–ê–†–ê–¢–ù–´–•
                              –ü–†–ï–†–´–í–ê–ù–ò–ô –û–¢ –õ–Æ–ë–´–• –ò–°–¢–û–ß–ù–ò–ö–û–í –ù–ê –í–†–ï–ú–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò
                     345     
023E 74F0            346             MOV             A, #11110000b
0240 F5A0            347             MOV             P2, A                           ; "–ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø" –ê–î
                             –†–ï–°–ù–û–ô –®–ò–ù–´
                     348     
                     349     ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –í–ù–ï–®–ù–ò–• –°–ò–ì–ù–ê–õ–û–í –ò –ë–£–§–ï–†–ê
0242 D2B4            350             SETB    Y1
0244 C2B5            351             CLR             Y3
                     352             
0246 C294            353             CLR             FULL_BUF                ; –°–ë–†–û–° –°–ò–ì–ù–ê–õ–ê –ü–ï–†–ï–ü–û–õ–
                             ù–ï–ù–ò–Ø –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–î–õ–Ø –í–ù–ï–®–ù–ï–ì–û –£–°–¢–†–û–ô–°–¢–í–ê)
0248 D2B6            354             SETB    WR_MEM                  ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ò–ì–ù–ê–õ–û–í –î–õ–
                             Ø –ë–£–§–ï–†–ê
024A D2B7            355             SETB    RD_MEM
                     356             
                     357     ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–¶–ò–Ø –¢–ê–°–¢–ê–¢–£–†–´
024C 74FF            358             MOV     A, #11111111b           ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –õ–ò–ù–ò–ô –¢–ê–°–¢–ê–
                             ¢–£–†–´ (–°–í–ï–¢–û–î–ò–û–î –ó–ê–ñ–ñ–ï–¢–°–Ø –ü–û–ó–ñ–ï)
024E F580            359             MOV     P0, A
                     360             
                     361     ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–î–ò
0250 900D00          362             MOV             DPTR, #RG1              ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–¢–ê–†–®–ï–ì
                             –û –ó–ù–ê–ö–û–ú–ï–°–¢–ê –°–î–ò
0253 7400            363             MOV             A, #00000000b   ; –ó–ê–ü–ò–°–¨ "–ü–£–°–¢–û–ô" –ö–û–ú–ë–ò–ù–ê–¶–ò–ò 
                             –ù–ê–ü–†–Ø–ú–£–Æ –í –°–î–ò 
0255 F0              364             MOVX    @DPTR, A                
                     365     
0256 900E00          366             MOV             DPTR, #RG2              ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ú–õ–ê–î–®–ï–ì
                             –û –ó–ù–ê–ö–û–ú–ï–°–¢–ê –°–î–ò
0259 7400            367             MOV             A, #00000000b   ; –ó–ê–ü–ò–°–¨ "–ü–£–°–¢–û–ô" –ö–û–ú–ë–ò–ù–ê–¶–ò–ò 
                             –ù–ê–ü–†–Ø–ú–£–Æ –í –°–î–ò 
025B F0              368             MOVX    @DPTR, A                        
                     369             
                     370     ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –¢–ê–ô–ú–ï–†–û–í –ò –ü–†–ò–ï–ú–û–ü–ï–†–ï–î–ê–¢–ß–ò–ö–ê –ü–û–°–
                             õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–ì–û –ü–û–†–¢–ê       
                     371             ;T0      - –ö–û–ù–¢–†–û–õ–ò–†–£–ï–¢ –ì–ï–ù–ï–ê–†–¶–ò–Æ Y1
                     372             ;T1  - –ö–û–ù–¢–†–û–õ–ò–†–£–ï–¢ –ì–ï–ù–ï–†–ê–¶–ò–Æ Y3
                     373             ;T2      - –í–´–ö–õ–Æ–ß–ï–ù (–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø - –û–¢–°–£–¢–°–¢–í–£–ï–¢
                              –í i8051)
                     374             
025C                 375             MOV             WCON, #11100000b                ; –ù–ê–°–¢–†–û–ô–ö–ê –°–¢–û–†–û–ñ–ï
                             –í–û–ì–û –¢–ê–ô–ú–ï–†–ê –° –ü–ï–†–ò–û–î–û–ú –°–†–ê–ë–ê–¢–´–í–ê–ù–ò–Ø 2048 –ú–° (–ü–û 1 –ë–ê
                             –ù–ö–£ –£–ö–ê–ó–ê–¢–ï–õ–ï–ô –î–ê–ù–ù–´–•)
*** _________________________________________________^
*** ERROR #A45 IN 375 (MPEI.IVTI.VMSS.0720-15.asm, LINE 375): UNDEFINED SYMBOL (PASS-2)
025F                 376             SETB    WDTEN
*** _________________________________________^
*** ERROR #A45 IN 376 (MPEI.IVTI.VMSS.0720-15.asm, LINE 376): UNDEFINED SYMBOL (PASS-2)
                     377             
0261 C28C            378             CLR     TR0                                     ; –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú –¢–ê–ô–ú–ï–†–´ –¢0-–¢2
0263 C28E            379             CLR     TR1
                     380             ;CLR    T2OE                                            
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE     9

                     381             
0265 7598B4          382             MOV             SCON, #10110100b                ; –£–°–¢–ê–ù–û–í–ö–ê 2 –†–ï–ñ–ò–ú–ê –†–ê–ë–û–¢–´ UART (–ê–°–ò–ù–•–†. –° –§–ò–ö–°. –°–ö–û–†–û–°–¢–¨–Æ Fclk/64)
0268 53877F          383         ANL         PCON, #01111111b                ; –Ø–í–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê –°–ö–û–†–û–°–¢–ò –ü–ï–†–ï–î–ê–ß–ò
                     384             
026B 758911          385             MOV             TMOD, #00010001b                ; –£–°–¢–ê–ù–û–í–ö–ê –†–ï–ñ–ò–ú–û–í –¢–ê–ô–ú–ï–†–û–í (–¢1 –ò –¢0 - 16 –ë–ò–¢)
                     386             
026E 758C8A          387             MOV             TH0, #HIGH(TimerT0STROB)            ; –ó–ê–ì–†–£–ó–ö–ê –°–¢. –ë–ê–ô–¢–ê –¢0
0271 758AD0          388             MOV             TL0, #LOW(TimerT0STROB)         ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ë–ê–ô–¢–ê –¢0
0274 758DE4          389             MOV             TH1, #HIGH(TimerT1ti)           ; –ó–ê–ì–†–£–ó–ö–ê –°–¢. –ë–ê–ô–¢–ê –¢1 –í–†–ï–ú–ï–ù–ò –ò–ú–ü–£–õ–¨–°–ê
0277 758BA8          390             MOV             TL1, #LOW(TimerT1ti)            ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ë–ê–ô–¢–ê –¢1 –í–†–ï–ú–ï–ù–ò –ò–ú–ü–£–õ–¨–°–ê
                     391             
                     392     ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –î–ï–°–Ø–¢–ò–ß–ù–û–ô –í–ï–õ–ò–ß–ò–ù–´ (Q = G)
027A 7830            393             MOV             R0, #Q
027C 7607            394             MOV             @R0, #G
                     395     
                     396     ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –£–ö–ê–ó–ê–¢–ï–õ–Ø "–ì–û–õ–û–í–´" –í –ü–ê–ú–Ø–¢–ò –ò "–ù–ê –ë–û–†–¢–£"
027E 7830            397             MOV             R0, #HEAD_MEM           
0280 7470            398             MOV             A, #CE_MEM                      ; "–í–´–ë–û–†" –ú–ö–†–û–°–•–ï–ú–´ –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê [CS]
0282 54F0            399             ANL             A, #11110000b           ; –û–ë–ù–£–õ–ï–ù–ò–ï –°–¢–ê–†–®–ò–• –ë–ò–¢–û–í –ê–î–†–ï–°–ê
0284 F583            400             MOV             DPH, A
0286 758200          401             MOV             DPL, #0                         ; –ê–î–†–ï–° "–ì–û–õ–û–í–´" - 0000h
                     402             
0289 7400            403             MOV             A, #0
028B F0              404             MOVX    @DPTR, A                        ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–¢. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ë–£–§–ï–†–ê (–í –ë–£–§–ï–†–ï)
028C F6              405             MOV             @R0, A                          ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–¢. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ë–£–§–ï–†–ê ("–ù–ê –ë–û–†–¢–£")
                     406                                     
028D 08              407             INC             R0
028E A3              408             INC             DPTR
                     409             
028F 7404            410             MOV             A, #04h                          
0291 F0              411             MOVX    @DPTR, A                        ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ú–õ. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ë–£–§–ï–†–ê (–í –ë–£–§–ï–†–ï)
0292 F6              412             MOV             @R0, A                          ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ú–õ. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ë–£–§–ï–†–ê ("–ù–ê –ë–û–†–¢–£")
                     413             
                     414     ; –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –†–ï–ì–ò–°–¢–†–û–í R0-R7 (1 –ë–ê–ù–ö–ê)    
0293 7900            415             MOV             R1, #0                  ; –§–õ–ê–ì –û–®–ò–ë–ö–ò –û–ü–ï–†–ê–¢–û–†–ê (0 - –û–®–ò–ë–ö–ê –û–¢–°–£–¢–°–¢–í–£–ï–¢)
0295 7AFF            416             MOV             R2, #-1                 ; –¶–ò–§–†–ê –í –ó–ù–ê–ö–û–ú–ï–°–¢–ï –ú–õ–ê–î–®–ï–ì–û –†–ê–ó–†–Ø–î–ê –°–î–ò
0297 7BFF            417             MOV             R3, #-1                 ; –¶–ò–§–†–ê –í –ó–ù–ê–ö–û–ú–ï–°–¢–ï –°–¢–ê–†–®–ï–ì–û –†–ê–ó–†–Ø–î–ê –°–î–ò
0299 7C00            418             MOV             R4, #0                  ; –î–ê–ù–ù–´–ï –û–¢ UART (–ò–ó–ù–ê–ß–ê–õ–¨–ù–û "–ü–£–°–¢–û–ô" –ü–ê–ö–ï–¢)
029B 7D00            419             MOV             R5, #0                  ; –£–ü–†–ê–í–õ–Ø–Æ–©–ï–ï –í–û–ó–î–ï–ô–°–¢–í–ò–ï Y3 (0 - –ù–ê–î–û –ü–ï–†–ï–ö–õ–Æ–ß–ò–¢–¨ –ù–ê –í–´–°–û–ö–ò–ô –£–†–û–í–ï–ù–¨ / 1 - –ù–ê –ù–ò–ó–ö–ò–ô)
029D 7E04            420             MOV             R6, #04h                ; –ú–õ. –ß–ê–°–¢–¨ "–•–í–û–°–¢–ê" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–ò–ó–ù–ê–ß–ê–õ–¨–ù–û –£–°–¢–ê–ù–û–í–ö–ê –ù–ê 1-–ô –ê–î–†–ï–°: 0004h)
029F 7F00            421             MOV             R7, #0                  ; –°–¢. –ß–ê–°–¢–¨ "–•–í–û–°–¢–ê" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–ò–ó–ù–ê–ß–ê–õ–¨–ù–û –£–°–¢–ê–ù–û–í–ö–ê –ù–ê 1-–ô –ê–î–†–ï–°: 0004h)
                     422     
                     423     ; –í–ö–õ–Æ–ß–ï–ù–ò–ï –°–í–ï–¢–û–î–ò–û–î–ê (–ö–ê–ö –ü–†–ò–ó–ù–ê–ö –ì–û–¢–û–í–ù–û–°–¢–ò –ú–ü–° –ö –†–ê–ë–û–¢–ï –ü–û–°–õ–ï –°–¢–ê–†–¢–ê)
02A1 C293            424             CLR             LED
                     425     
                     426     ; –ù–ê–°–¢–†–û–ô–ö–ê –†–ï–ì–ò–°–¢–†–û–í –ü–†–ò–û–†–ò–¢–ï–¢–ê –ò –†–ê–ó–†–ï–®–ï–ù–ò–ï –ü–†–ï–†–´–í–ê–ù–ò–ô
02A3 43B808          427             ORL             IP, #00001000b                  ; –ù–ê–ò–í–´–°–®. –ü–†–ò–û–†–ò–¢–ï–¢ –£ –¢–ê–ô–ú–†–ê –¢1 (–ì–ï–ù–ï–†–ê–¢–û–† –ü–†–Ø–ú–û–£–ì. –ò–ü–£–õ–¨–°–û–í)
02A6 75A89F          428             MOV     IE, #10011111b                  ; –£–°–¢–ê–ù–û–í–ö–ê –†–ê–ó–†–ï–®–ï–ù–ò–Ø –í–ù–ï–®–ù–ò–• –ü–†–ï–†–´–í–ê–ù–ò–ô, –û–¢ –¢–ê–ô–ú–ï–†–û–í –¢0/–¢1 –ò UART 
                     429     
02A9 22              430     RET
                     431     
                     432     ; ------------------------------ –í–´–ß–ò–°–õ–ï–ù–ò–ï –£–ü–†–ê–í–õ–Ø–Æ–©–ï–ì–û –í–û–ó–î–ï–ô–°–¢–í–ò–Ø –ò –ó–ê–ü–ò–°–¨ –í –ë–£–§–ï–† ---------------------------------;
02AA                 433     WRITEMEM:       
02AA 7470            434                     MOV             A, #CE_MEM                      ; "–í–´–ë–û–†" –ú–ò–ö–†–û–°–•–ï–ú–´ –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê (–û–ó–£) [CS]
02AC 7830            435                     MOV             R0, #HEAD_MEM           ; –ü–û–õ–£–ß–ï–ù–ò–ï –ò –í–´–°–¢–ê–í–õ–ï–ù–ò–ï –°–¢. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê                   
02AE 46              436                     ORL             A, @R0                  
02AF F583            437                     MOV     DPH, A
                     438                     
02B1 08              439                     INC             R0
02B2 8682            440                     MOV             DPL, @R0                        ; –ü–û–õ–£–ß–ï–ù–ò–ï –ò –í–´–°–¢–ê–í–õ–ï–ù–ò–ï –ú–õ. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê
                     441                     
02B4 7400            442                     MOV             A, #0
02B6 F0              443                     MOVX    @DPTR, A                        ; –ó–ê–ü–ò–°–¨ "0" –í –°–¢. –ß–ê–°–¢–¨ (–ü–†–ò –ù–ï–û–ë–•–û–î–ò–ú–û–°–¢–ò - –ù–ò–ñ–ï –ü–†–û–ò–°–•–û–î–ò–¢ –ü–ï–†–ï–ó–ê–ü–ò–°–¨)
                     444                     
02B7 7414            445                     MOV             A, #20                          ; –†–ê–°–ß–Å–¢ –£–ü–†–ê–í–õ–Ø–Æ–©–ï–ì–û –í–û–ó–î–ï–ô–°–¢–í–ò–Ø Y2 = M+Xd2, 
02B9 2C              446                     ADD             A, R4                           ; –ì–î–ï Xd2 - –î–ê–ù–ù–´–ï –ü–û–õ–£–ß–ï–ù–ù–´–ï –ü–û UART
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE    10

02BA F5F0            447                     MOV             B, A                            ; (–í–†–ï–ú–ï–ù–ù–û–ï –•–†–ê–ù–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–ê)
                     448             
02BC 5003            449                     JNC             GO_TO_WRITE                     ; –ï–°–õ–ò –ù–ï –í–û–ó–ù–ò–ö–õ–û –ü–ï–†–ï–ü–û–õ–ù–ï–ù–ò–Ø, –¢–û –ü–ï–†–ï–•–û–î–ò–ú –ö –ó–ê–ü–ò–°–ò Y2 –í –ö–û–õ–¨–¶–ï–í–û–ô –ë–£–§–ï–†
                     450                     
02BE 7401            451                     MOV             A, #1                           ; –ò–ù–ê–ß–ï –í –°–¢. –ß–ê–°–¢–¨ –ü–ò–®–ï–ú "1"
02C0 F0              452                     MOVX    @DPTR, A                        ; –ü–û –í–´–°–¢–ê–í–õ–ï–ù–ù–û–ú–£ –ê–î–†–ï–°–£
02C1                 453             GO_TO_WRITE:    
02C1 A3              454                     INC             DPTR                            ; –£–í–ï–õ–ò–ß–ï–ù–ò–ï –ê–î–†–ï–°–ê –ù–ê "+1" (–ü–†–ï–•–û–î –ö –ó–ê–ü–ò–°–ò –ú–õ. –ß–ê–°–¢–ò)
                     455                     
02C2 E5F0            456                     MOV             A, B                            ; –ó–ê–ü–ò–°–¨ –ó–ù–ê–ß–ï–ù–ò–Ø Y2 –í –ö–û–õ–¨–¶–ï–í–û–ô –ë–£–§–ï–†
02C4 F0              457                     MOVX    @DPTR, A                        ; –ü–û –í–´–°–¢–ê–í–õ–ï–ù–ù–û–ú–£ –ê–î–†–ï–°–£
                     458                     
02C5 A3              459                     INC             DPTR                            ; –ü–ï–†–ï–•–û–î –ù–ê –°–õ–ï–î–£–Æ–©–£–Æ –ó–ê–ü–ò–°–¨
                     460             
                     461             ; –ü–†–û–í–ï–†–ö–ê –ù–ê –î–û–ü–£–°–¢–ò–ú–û–°–¢–¨ –ê–†–ï–°–ê (–ù–ï –í–´–®–õ–ò –õ–ò –ó–ê 1792-—é –∑–∞–ø–∏—Å—å) 4096 = 1000h
02C6 E583            462                     MOV             A, DPH                                          ; –ò–ú–ï–ï–¢ –°–ú–´–°–õ –ü–†–û–í–ï–†–Ø–¢–¨ –°–¢–ê–†–®–£–Æ –ß–ê–°–¢–¨ –ê–î–†–ï–°–ê
02C8 B4100B          463                     CJNE    A, #10h, WRITE_NEW_POS
                     464             
                     465                     ; –ï–°–õ–ò –û–°–¢–ê–õ–ò–°–¨ –¢–£–¢ - –ó–ù–ê–ß–ò–¢ –ù–ï–û–ë–•–û–î–ò–ú–û –ü–ï–†–ï–î–í–ò–ù–£–¢–¨ "–ì–û–õ–û–í–£" –ù–ê –°–ê–ú–£–Æ 1-–Æ –ó–ê–ü–ò–°–¨ –í –ö–û–õ–¨–¶–ï–í–û–ú –ë–£–§–ï–†–ï
02CB 7830            466                             MOV             R0, #HEAD_MEM           ; –°–û–•–†–ê–ù–ï–ù–ò–ï –ù–û–í–û–ì–û –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê
02CD 7400            467                             MOV             A, #0                   ; –°–¢. –ß–ê–°–¢–¨ –ê–î–†–ï–°–ê
02CF F6              468                             MOV             @R0, A
02D0 08              469                             INC             R0
02D1 7404            470                             MOV             A, #04h                 ; –ú–õ. –ß–ê–°–¢–¨ –ê–î–†–ï–°–ê
02D3 F6              471                             MOV             @R0, A
02D4 8007            472                             JMP             WRITEMEM_END
                     473                     
02D6                 474             WRITE_NEW_POS:
02D6 7830            475                     MOV             R0, #HEAD_MEM           ; –°–û–•–†–ê–ù–ï–ù–ò–ï –ù–û–í–û–ì–û –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´" –ö–û–õ–¨–¶–ï–í–û–ì–û –ë–£–§–ï–†–ê "–£ –°–ï–ë–Ø"
02D8 A683            476                     MOV             @R0, DPH
02DA 08              477                     INC             R0
02DB A682            478                     MOV             @R0, DPL
                     479                     
02DD                 480             WRITEMEM_END:
02DD 7830            481                     MOV             R0, #HEAD_MEM
02DF E6              482                     MOV             A, @R0
02E0 900000          483                     MOV             DPTR, #0000h            ; –û–ë–†–ê–©–ï–ù–ò–ï –í –ö–û–õ–¨–¶–ï–í–û–ô –ë–£–§–ï–† –ü–û –ê–î–†–ï–°–£ "–ì–û–õ–û–í–´" (0000h..0002h)
02E3 F0              484                     MOVX    @DPTR, A                        ; –°–û–•–†. –°–¢. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´"
                     485                     
02E4 A3              486                     INC             DPTR
02E5 08              487                     INC     R0
02E6 E6              488                     MOV             A, @R0
02E7 F0              489                     MOVX    @DPTR, A                        ; –°–û–•–†. –ú–õ. –ß–ê–°–¢–ò –ê–î–†–ï–°–ê "–ì–û–õ–û–í–´"
                     490                     
02E8 C294            491                     CLR             FULL_BUF                        ; –°–ù–Ø–õ–ò –°–ò–ì–ù–ê–õ –ó–ê–ü–û–õ–ù–ï–ù–ò–Ø (–¢.–ö. –¢–û–õ–¨–ö–û –ß–¢–û –ü–û–Ø–í–ò–õ–ê–°–¨ –ù–û–í–ê–Ø –ó–ê–ü–ò–°–¨)
02EA 22              492     RET
                     493     
                     494     ; ------------------------------------- –ü–†–ò–ù–Ø–¢–ò–ï –†–ï–®–ï–ù–ò–Ø –û–ë –£–ü–†–ê–í–õ–ï–ù–ò–ò ------------------------------------------------;
02EB                 495     DATACHECK:
02EB 7430            496             MOV             A, #Q
02ED 5C              497             ANL             A, R4                           ; –°–†–ê–í–ù–ï–ù–ò–ï –î–ê–ù–ù–´–•, –ü–û–õ–£–ß–ï–ù–ù–´–• –ü–û UART (R4) –ò –î–ê–ù–ù–´–• –û–ü–ï–†–ê–¢–û–†–ê (Q)
02EE 400F            498             JC              GEN_OFF                         ; –í–´–ö–õ–Æ–ß–ï–ù–ò–ï –ì–ï–ù–ï–†–ê–¢–û–†–ê, –ï–°–õ–ò Q < Xd2                                                                                           
                     499             
02F0 E590            500             MOV             A, P1                                           ; –†–ï–®–ï–ù–ò–ï –û –ù–ï–û–ë–•–û–î–ò–ú–û–°–¢–ò –í–ö–õ–Æ–ß–ï–ù–ò–Ø –ì–ï–ù–ï–†–ê–¢–û–†–ê –ü–†–ò–ù–ò–ú–ê–ï–¢–°–Ø –ù–ê –û–°–ù–û–í–ï
                     501                                                                                     ; –ê–ù–ê–õ–ò–ó–ê –°–û–°–¢–û–Ø–ù–ò–Ø –°–í–ï–¢–û–î–ò–û–î–ê (–í–ù–ê–ß–ê–õ–ï –ß–ò–¢–ê–ï–ú –í–ï–°–¨ –ü–û–†–¢)
                     502                                                                                     
02F2 5408            503             ANL             A, #00001000b                           ; –û–°–¢–ê–í–õ–Ø–ï–ú –¢–û–õ–¨–ö–û –ë–ò–¢ –°–û–°–¢–û–Ø–ù–ò–Ø –°–í–ï–¢–û–î–ò–û–î–ê                                        
02F4 B40824          504             CJNE    A, #00001000b, ENDCHECK         ; –í–´–•–û–î, –ï–°–õ–ò –°–í–ï–¢–û–î–ò–û–î –í–´–ö–õ–Æ–ß–ï–ù 
                     505             
02F7 D28E            506                     SETB    TR1                                     ; –í–ö–õ–Æ–ß–ï–ù–ò–ï –ì–ï–ù–ï–†–ê–¢–û–†–ê –ü–†–Ø–ú–û–£–ì–û–õ–¨–ù–´–• –ò–ú–ü–£–õ–¨–°–û–í Y3
02F9 D293            507                     SETB    LED                                             ; –í–´–ö–õ–Æ–ß–ï–ù–ò–ï –°–í–ï–¢–û–î–ò–û–î–ê
02FB 7D01            508                     MOV             R5, #1                                  ; –¢.–ï. –ò–î–Å–¢ 1-–Ø –ü–û–õ–û–í–ò–ù–ê –ü–ï–†–ò–û–î–ê
02FD 801C            509                     JMP             ENDCHECK
                     510                     
02FF                 511             GEN_OFF:
02FF BD0002          512                     CJNE    R5, #0, GO_GEN_OFF              ; –ï–°–õ–ò –í R5 –ù–ê–•–û–î–ò–¢–°–Ø "0" - –ó–ù–ê–ß–ò–¢ –ò–î–Å–¢ –í–¢–û–†–ê–Ø –ü–û–õ–û–í–ò–ù–ê –ü–ï–†–ò–û–î–ê –°–ò–ì–ù–ê–õ–ê Y3
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE    11

0302 80FB            513                     JMP             GEN_OFF                                 ; –ï–°–õ–ò –ò–î–Å–¢ –¢–û–õ–¨–ö–û –ü–ï–†–í–ê–Ø –ü–û–õ–û–í–ò–ù–ê - –ñ–î–Å–ú
                     514                     
0304                 515             GO_GEN_OFF:
0304 C2AB            516                     CLR             ET1                                             ; –ó–ê–ü–†–ï–¢ –ü–†–ï–†–´–í–ê–ù–ò–ô –ü–û –¢–ê–ô–ú–ï–†–£ –¢1
0306 E588            517                     MOV             A, TCON                                 ; –ü–û–õ–£–ß–ï–ù–ò–ï –ò–ù–§–û–†–ú–ê–¶–ò–ò –û –°–û–°–¢–û–Ø–ù–ò–ò –¢1 (TF1 –ë–£–î–ï–¢ –í–ó–í–ï–î–Å–ù –ö–û–ì–î–ê –¢–ê–ô–ú–ï–† –î–û–°–ß–ò–¢–ê–ï–¢)
0308 5480            518                     ANL             A, #10000000b
030A B400F7          519                     CJNE    A, #0, GO_GEN_OFF               ; –û–ñ–ò–î–ê–ù–ò–ï –û–ö–û–ù–ß–ê–ù–ò–Ø –ü–ï–†–ò–û–î–ê –ü–†–Ø–ú–û–£–ì–û–õ–¨–ù–û–ì–û –ò–ú–ü–£–õ–¨–°–ê Y3
                     520                     
                     521             ; –ï–°–õ–ò –î–û–®–õ–ò –°–Æ–î–ê - –ó–ù–ê–ß–ò–¢ TH1 –ò TL1 –ü–£–°–¢–´
030D C28E            522                     CLR             TR1                                             ; –û–°–¢–ê–ù–û–í–ö–ê –ì–ï–ù–ï–†–ê–¢–û–†–ê –ü–†–Ø–ú–û–£–ì–û–õ–¨–ù–´–• –ò–ú–ü–£–õ–¨–°–û–í Y3
030F C2B5            523                     CLR             Y3                                              ; –û–°–¢–ê–ù–û–í–ö–ê –ü–†–Ø–ú–û–£–ì–û–õ–¨–ù–û–ì–û –ò–ú–ü–£–õ–¨–°–û–í Y3
                     524                     
0311 758DE4          525                     MOV             TH1, #HIGH(TimerT1ti)           ; –ó–ê–ì–†–£–ó–ö–ê –°–¢. –ë–ê–ô–¢–ê –¢1 –í–†–ï–ú–ï–ù–ò –ò–ú–ü–£–õ–¨–°–ê
0314 758BA8          526                     MOV             TL1, #LOW(TimerT1ti)            ; –ó–ê–ì–†–£–ó–ö–ê –ú–õ. –ë–ê–ô–¢–ê –¢1 –í–†–ï–ú–ï–ù–ò –ò–ú–ü–£–õ–¨–°–ê
                     527                     
0317 D2AB            528                     SETB    ET1                                             ; –†–ê–ó–†–ï–®–ï–ù–ò–ï –ü–†–ï–†–´–í–ê–ù–ò–ô –ü–û –¢–ê–ô–ú–ï–†–£ –¢1
                     529                     
0319 C293            530                     CLR             LED                                             ; –í–ö–õ–Æ–ß–ï–ù–ò–ï –°–í–ï–¢–û–î–ò–û–î–ê                       
                     531             
031B                 532             ENDCHECK:       
031B 22              533     RET
                     534     
                     535     ; ------------------------------------------------- –ò–ù–î–ò–ö–ê–¶–ò–Ø ---------------------------------------------------------;
031C                 536     INDICATION:     
                     537             
                     538     ; –ü–û–ò–°–ö –ö–û–î–ê (–ù–ê –°–î–ò) –î–õ–Ø –í–í–ï–î–Å–ù–ù–û–ô –¶–ò–§–†–´
031C                 539             TRANSLATE:
031C F5F0            540                     MOV             B, A
031E 54FF            541                     ANL             A, #-1
0320 6040            542                             JZ              NODIG
0322 E5F0            543                     MOV             A, B
0324 5409            544                     ANL     A, #9
0326 6062            545                             JZ              DIG9
0328 E5F0            546                     MOV             A, B
032A 5408            547                     ANL     A, #8
032C 6058            548                             JZ              DIG8
032E E5F0            549                     MOV             A, B
0330 5407            550                     ANL     A, #7
0332 604E            551                             JZ              DIG7
0334 E5F0            552                     MOV             A, B
0336 5406            553                     ANL     A, #6
0338 6044            554                             JZ              DIG6
033A E5F0            555                     MOV             A, B
033C 5405            556                     ANL     A, #5
033E 603A            557                             JZ              DIG5
0340 E5F0            558                     MOV             A, B
0342 5404            559                     ANL     A, #4
0344 6030            560                             JZ              DIG4
0346 E5F0            561                     MOV             A, B
0348 5403            562                     ANL             A, #3
034A 6026            563                             JZ              DIG3
034C E5F0            564                     MOV             A, B
034E 5402            565                     ANL             A, #2
0350 601C            566                             JZ              DIG2
0352 E5F0            567                     MOV             A, B
0354 5401            568                     ANL             A, #1
0356 6012            569                             JZ              DIG1
0358 E5F0            570                     MOV             A, B
035A 5400            571                     ANL             A, #0
035C 6008            572                             JZ              DIG0
                     573                     ; –í –ü–†–û–¢–ò–í–ù–û–ú –°–õ–£–ß–ê–ï –≠–¢–û –°–ò–ú–í–û–õ –û–®–ò–ë–ö–ò "–ï" - –ü–ï–†–ï–•–û–î –°–†–ê–ó–£ –ö –ï–ì–û –§–û–†–ú–ò–†–û–í–ê–ù–ò–Æ
                     574             
                     575     ; –ó–ê–ü–ò–°–¨ –ö–û–î–ê –ê–ö–¢–ò–í–ê–¶–ò–ò –ù–ï–û–ë–•–û–î–ò–ú–´–• –°–ï–ú–ï–ù–¢–û–í –ù–ê –°–î–ò
035E 7479            576                     MOV     A, #01111001b
0360 802C            577                             JMP             WRITE_DIGITS
0362                 578             NODIG:
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE    12

0362 7400            579                     MOV     A, #00000000b
0364 8028            580                             JMP             WRITE_DIGITS    
0366                 581             DIG0:
0366 743F            582                     MOV     A, #00111111b
0368 8024            583                             JMP             WRITE_DIGITS            
036A                 584             DIG1:
036A 7406            585                     MOV     A, #00000110b
036C 8020            586                             JMP             WRITE_DIGITS            
036E                 587             DIG2:
036E 745B            588                     MOV     A, #01011011b
0370 801C            589                             JMP             WRITE_DIGITS            
0372                 590             DIG3:
0372 744F            591                     MOV     A, #01001111b
0374 8018            592                             JMP             WRITE_DIGITS            
0376                 593             DIG4:
0376 7466            594                     MOV     A, #01100110b
0378 8014            595                             JMP             WRITE_DIGITS            
037A                 596             DIG5:
037A 746D            597                     MOV     A, #01101101b
037C 8010            598                             JMP             WRITE_DIGITS            
037E                 599             DIG6:
037E 747D            600                     MOV     A, #01111101b
0380 800C            601                             JMP             WRITE_DIGITS
0382                 602             DIG7:
0382 7407            603                     MOV     A, #00000111b
0384 8008            604                             JMP             WRITE_DIGITS            
0386                 605             DIG8:
0386 747F            606                     MOV     A, #01111111b
0388 8004            607                             JMP             WRITE_DIGITS
038A                 608             DIG9:
038A 7467            609                     MOV     A, #01100111b
038C 8000            610                             JMP             WRITE_DIGITS
                     611             
038E                 612             WRITE_DIGITS:   
038E F5F0            613                     MOV             B, A
0390 EA              614                     MOV             A, R2
0391 FB              615                     MOV             R3, A                           ; –ü–ï–†–ï–ù–û–° –¶–ò–§–†–´ –ò–ó –ú–õ–ê–î–®–ï–ì–û –ó–ù–ê–ö–û–ú–ï–°–¢–ê –í –°–¢–ê–†–®–ï–ï
0392 900D00          616                     MOV             DPTR, #RG1                      ; | –ü–û–î–ê–ß–ê –ó–ù–ê–ß–ï–ù–ò–Ø 
0395 F0              617                     MOVX            @DPTR, A                        ; | –í –†–ï–ì–ò–°–¢–†-–ó–ê–©–Å–õ–ö–£
                     618                     
0396 E5F0            619                     MOV             A, B
0398 FA              620                     MOV             R2, A                           ; –ó–ê–ì–†–£–ó–ö–ê –ù–û–í–û–ì–û–ô –¶–ò–§–†–´ –ù–ê –ú–õ–ê–î–®–ï–ï –ó–ù–ê–ö–û–ú–ï–°–¢–û
0399 900E00          621                     MOV             DPTR, #RG2                      ; | –ü–û–î–ê–ß–ê –ó–ù–ê–ß–ï–ù–ò–Ø 
039C F0              622                     MOVX    @DPTR, A                        ; | –í –†–ï–ì–ò–°–¢–†-–ó–ê–©–Å–õ–ö–£            
039D 22              623     RET
                     624     
                     625     
                     626     ; -------------------------------------- –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ß–ù–û–ì–û –í–û–ó–î–ï–ô–°–¢–í–ò–Ø ---------------------------------------------;
039E                 627     ERROR:
039E 740A            628             MOV     A, #10
03A0 711C            629             CALL    INDICATION              ; –í–´–í–û–î –ù–ê –°–î–ò –°–ò–ú–í–û–õ–ê "–ï" (–í –ú–õ–ê–î–®–ï–ï –ó–ù–ê–ö–û–ú–ï–°–¢–û)
03A2 7401            630             MOV     A, #1
03A4 711C            631             CALL    INDICATION              ; –í–´–í–û–î –ù–ê –°–î–ò –¶–ò–§–†–´ 1 (–í –ú–õ–ê–î–®–ï–ï –ó–ù–ê–ö–û–ú–ï–°–¢–û -> "E" –ë–£–î–ï–¢ –°–î–í–ò–ù–£–¢–û –í –°–¢–ê–†–®–ï–ï)
03A6 7901            632             MOV             R1, #1
03A8 22              633     RET
                     634     ;======================================================================================================================;
                     635     
                     636     END
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE    13

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
CE_MEM . . . . . .  N NUMB   0070H   A   
CHECK1 . . . . . .  C ADDR   01B1H   A   
CHECK2 . . . . . .  C ADDR   0166H   A   
CHECK3 . . . . . .  C ADDR   0138H   A   
CHECK4 . . . . . .  C ADDR   01A8H   A   
CHECK5 . . . . . .  C ADDR   015DH   A   
CHECK6 . . . . . .  C ADDR   012FH   A   
CHECK7 . . . . . .  C ADDR   019FH   A   
CHECK8 . . . . . .  C ADDR   0154H   A   
CODE_ERROR . . . .  C ADDR   01BAH   A   
DATACHECK. . . . .  C ADDR   02EBH   A   
DIG0 . . . . . . .  C ADDR   0366H   A   
DIG1 . . . . . . .  C ADDR   036AH   A   
DIG2 . . . . . . .  C ADDR   036EH   A   
DIG3 . . . . . . .  C ADDR   0372H   A   
DIG4 . . . . . . .  C ADDR   0376H   A   
DIG5 . . . . . . .  C ADDR   037AH   A   
DIG6 . . . . . . .  C ADDR   037EH   A   
DIG7 . . . . . . .  C ADDR   0382H   A   
DIG8 . . . . . . .  C ADDR   0386H   A   
DIG9 . . . . . . .  C ADDR   038AH   A   
DPH. . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
ENDCHECK . . . . .  C ADDR   031BH   A   
END_CHECK_TAIL . .  C ADDR   01EBH   A   
ERROR. . . . . . .  C ADDR   039EH   A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
EX0. . . . . . . .  B ADDR   00A8H.0 A   
EXT0_KBRD. . . . .  C ADDR   0105H   A   
EXT1_BUSY. . . . .  C ADDR   01D2H   A   
FIX_Q. . . . . . .  C ADDR   017FH   A   
FULL_BUF . . . . .  B ADDR   0090H.4 A   
G. . . . . . . . .  N NUMB   0007H   A   
GEN_OFF. . . . . .  C ADDR   02FFH   A   
GEN_Y1 . . . . . .  C ADDR   01C5H   A   
GEN_Y3 . . . . . .  C ADDR   0212H   A   
GEN_Y3_END . . . .  C ADDR   0231H   A   
GO_GEN_OFF . . . .  C ADDR   0304H   A   
GO_NEXT. . . . . .  C ADDR   0126H   A   
GO_SUMM. . . . . .  C ADDR   0184H   A   
GO_TO_HI . . . . .  C ADDR   0225H   A   
GO_TO_KBRD_END . .  C ADDR   0124H   A   
GO_TO_WRITE. . . .  C ADDR   02C1H   A   
HEAD_MEM . . . . .  D ADDR   0030H   A   
IE . . . . . . . .  D ADDR   00A8H   A   
INCORRECT. . . . .  C ADDR   01FDH   A   
INDICATION . . . .  C ADDR   031CH   A   
INI. . . . . . . .  C ADDR   023CH   A   
IP . . . . . . . .  D ADDR   00B8H   A   
KBRD . . . . . . .  N NUMB   0B00H   A   
KBRD_END . . . . .  C ADDR   01C2H   A   
LED. . . . . . . .  B ADDR   0090H.3 A   
LINE2. . . . . . .  C ADDR   0141H   A   
LINE3. . . . . . .  C ADDR   016FH   A   
M. . . . . . . . .  N NUMB   000FH   A   
NODIG. . . . . . .  C ADDR   0362H   A   
OK . . . . . . . .  C ADDR   01FFH   A   
A51 MACRO ASSEMBLER  MPEI_IVTI_VMSS_0720_15                                               12/18/2023 18:20:37 PAGE    14

P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   
PCON . . . . . . .  D ADDR   0087H   A   
Q. . . . . . . . .  D ADDR   0030H   A   
RD_MEM . . . . . .  B ADDR   00B0H.7 A   
RG1. . . . . . . .  N NUMB   0D00H   A   
RG2. . . . . . . .  N NUMB   0E00H   A   
RI . . . . . . . .  B ADDR   0098H.0 A   
SBL0 . . . . . . .  B ADDR   0090H.5 A   
SBL1 . . . . . . .  B ADDR   0090H.6 A   
SBL2 . . . . . . .  B ADDR   0090H.7 A   
SBUF . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . .  D ADDR   0098H   A   
SERIAL . . . . . .  C ADDR   0232H   A   
START. . . . . . .  C ADDR   0100H   A   
TCON . . . . . . .  D ADDR   0088H   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . .  B ADDR   0088H.7 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . .  D ADDR   008DH   A   
TIMERT0STROB . . .  N NUMB   8AD0H   A   
TIMERT1. . . . . .  N NUMB   92A0H   A   
TIMERT1TI. . . . .  N NUMB   E4A8H   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . .  D ADDR   008BH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
TRANSLATE. . . . .  C ADDR   031CH   A   
UART_TX. . . . . .  B ADDR   00B0H.1 A   
WCON . . . . . . .    ----   -----       
WDTEN. . . . . . .    ----   -----       
WRITEMEM . . . . .  C ADDR   02AAH   A   
WRITEMEM_END . . .  C ADDR   02DDH   A   
WRITE_DIGITS . . .  C ADDR   038EH   A   
WRITE_NEW_POS. . .  C ADDR   02D6H   A   
WR_MEM . . . . . .  B ADDR   00B0H.6 A   
Y1 . . . . . . . .  B ADDR   00B0H.4 A   
Y3 . . . . . . . .  B ADDR   00B0H.5 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 2 ERROR(S)
